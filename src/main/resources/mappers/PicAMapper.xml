<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper

  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"

  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.server.pica.PicAMapper">
<!-- mybatis-config.xml에 맵핑한 dto -->
<select id='test' resultType="Test">
	 select * from test
</select>
<!-- 직접 dto를 지정하려면 풀패키지 이름으로 -->
<insert id="uploadPic" parameterType="com.server.pica.dto.PicUploadDTO">
	insert into PICTURE (file,p_member_id,p_album_id) 
	values(#{file},#{p_member_id},#{p_album_id})
</insert>

<insert id="createAlbum" parameterType="com.server.pica.dto.CreateAlbumDTO">
	insert into ALBUM (name, description,defaultPicture,create_p_member_id) 
	values(#{name},#{description},#{defaultPicture},#{create_p_member_id})
</insert>

<insert id="registerMember" parameterType="com.server.pica.dto.RegisterMemberDTO">
	insert into MEMBER (nickname, password,email,phonenumber) 
	values(#{nickname},#{password},#{email},#{phonenumber})
</insert>

<select id='showPic' resultType="com.server.pica.dto.PicUploadDTO">
	 select * from PICTURE
</select>

<select id='showAlbum' resultType="com.server.pica.dto.CreateAlbumDTO">
	 select * from ALBUM
</select>

<select id='showMember' resultType="com.server.pica.dto.RegisterMemberDTO">
	 select * from MEMBER
</select>
<!-- 명령어 끝에 세미콜론 뺄것 (중요하진않음) -->
<!-- (중요함 )윈도우에선 테이블 이름 대소문자 구분 안하는데 리눅스는 함. 대문자로 쓸것.-->
<select id='myAlbum' parameterType="int" resultType="com.server.pica.dto.CreateAlbumDTO">
	 select * from ALBUM where create_p_member_id=#{create_p_member_id}
</select>

<select id='getNickNameFromId' parameterType="int" resultType="String">
	 select nickname from MEMBER where member_id=#{member_id}
</select>

<select id='showPicture' parameterType="int" resultType="com.server.pica.dto.PictureDTO">
	 select * from PICTURE where p_album_id=#{album_id}
</select>

</mapper>